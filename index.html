<!DOCTYPE html>
<html lang='en' >
  <head>
    <meta charset='UTF-8'>
    <title>INDETERMINACY</title>
    <link rel='stylesheet' href='css/style.css'>
    <link href='https://fonts.googleapis.com/css?family=Space+Mono' rel='stylesheet'>
  </head>
  <body>
    <section class='context'>
      <h1>INDETERMINACY</h1>
      <br>
      <p>
        <a href='https://en.wikipedia.org/wiki/Indeterminacy_(music)' target='_blank'>Indeterminacy</a>
        is a composing approach in which some aspects of a work are left open to chance or to the
        interpreter’s free choice.
      </p>
      <p>
        <a href='https://en.wikipedia.org/wiki/John_Cage' target='_blank'>John Cage</a>, a pioneer
        of indeterminacy, defined it as “the ability of a piece to be performed in substantially
        different ways.”
      </p>
      <p>
      For our series on indeterminacy, we invite you to create and share your own posters using this tool.
      </p>
      <br>
      <p>
      PRESENTED BY <a href='http://dublab.com/home/' target='_blank'>
        <br><br>
        <a href='http://dublab.com/home/' target='_blank'><img src="img/logo_horizontal_black.svg"></a>
      </p>
      <p>
      CODE + CONCEPT BY<br>
      <a href='https://github.com/alitorbati' target='_blank'>@alitorbati</a>
      + <a href='https://github.com/zekewattles' target='_blank'>@zekewattles</a>
      </p>
      </section>
    <canvas></canvas>
    <div class='config'>
      <form class='form' onsubmit='return false;'>
        <section>
          <label>
          Text
          <br />
          <input
            type='text'
            name='stringToPrint'
            autofocus
            autocomplete='off'
            value='ORDER AND CHAOS'
            >
          </label>
          <br><br>
          <button type='button' name='randomize' onClick='randomizeForm()'>Randomize</button>
          <br><br>
          <a name='download-vector' href='#'>Export SVG</a>
          <br><br>
          <a name='download-raster' href='#'>Export PNG</a>
          <br><br>
          <button onclick="showAdvanced()">Advanced</button>
        </section>


        <section id='advancedControls' style='display:none'>
          <label>
          Displacement
          <br>
          <input
            type='range'
            name='displacement'
            id='displacementInput'
            min='0'
            max='8'
            value=''
            >
          </label>
          <br>
          <label>
          Rotation
          <br>
          <input
            type='range'
            name='rotation'
            id='rotationInput'
            min='0'
            max='8'
            value=''
            >
          </label>
          <br>
          <label>
          Font Size
          <br>
          <input
            type='range'
            name='fontMultiplier'
            id='fontMultiplierInput'
            min='50'
            max='450'
            value='100'
            step='50'
            >
          </label>
          <br><br>
          <label>
          <input
            type='radio'
            name='textStyle'
            value='fill'
            checked
            >Fill
          </label>
          <br>
          <label>
          <input
            type='radio'
            name='textStyle'
            value='stroke'
            >Stroke
          </label>
          <br><br>
          <label>
          <input
            type='checkbox'
            name='showBoxes'
            >Show Boxes
          </label>
          <br>
          <label>
          <input
            type='checkbox'
            name='negative'
            >Invert
          </label>
          <br><br>
          <label>
            Ratio
            <br />
            <select name='ratio'>
              <option value='500:647' selected>Letter</option>
              <option value='480:720'>Poster</option>
              <option value='500:500'>Square</option>
            </select>
          </label>
        <!--THIS IS NOW REDUNDANT
        <br><br>
        <button type='button' name='chaos'>Remix</button>
        -->
        </section>
      </form>
    </div>
    <script  src='js/canvas2svg.js'></script>
    <script  src='js/index.js'></script>
    <script>

      function showAdvanced() {
        var x = document.getElementById("advancedControls");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
      } 

      function getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      function randomizeForm() {
        var inputEvent = new Event('input', {
            'bubbles': true,
            'cancelable': true
        });

        const textInput = document.querySelectorAll('input[name="stringToPrint"]')[0]
        let strings = ['ORDER', 'CHAOS', 'DISARRAY', 'INDETERMINACY']
        pickedStringIndex = getRandomInt(0, strings.length - 1)
        textInput.value = strings[pickedStringIndex]
        textInput.dispatchEvent(inputEvent)

        const displacementInput = document.getElementById('displacementInput')
        displacementInput.value = getRandomInt(0, 8)
        displacementInput.dispatchEvent(inputEvent)

        const textStyleInputs = document.querySelectorAll('input[name="textStyle"]')
        pickedStyleIndex = getRandomInt(0, 1)
        textStyleInputs[pickedStyleIndex].checked = true
        textStyleInputs[pickedStyleIndex].dispatchEvent(inputEvent)

        const rotationInput = document.getElementById('rotationInput')
        rotationInput.value = getRandomInt(0, 8)
        rotationInput.dispatchEvent(inputEvent)

        const fontMultiplierInput = document.getElementById('fontMultiplierInput')
        fontMultiplierInput.value = (getRandomInt(0, 8) * 50) + 50;
        fontMultiplierInput.dispatchEvent(inputEvent)
      }

      randomizeForm()
    </script>
  </body>
</html>
